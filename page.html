<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet " href="./css/bootstrap.min.css">
    <link rel="stylesheet " href="./css/bootstrap-table.min.css">
    <link rel="stylesheet " href="./css/jquery.datetimepicker.css">
    <link rel="stylesheet " href="./css/zTreeStyle/zTreeStyle.css"/>
    <script src="./js/jquery1.8.3.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <link href="./css/bootstrap-responsive.css " rel="stylesheet">
    <script src="./js/jquery.ztree.core.min.js"></script>
    <script src="./js/jquery.ztree.excheck.min.js"></script>
    <script src="./js/jquery.ztree.exedit.min.js"></script>
    <script src="./js/bootstrap-table-all.min.js"></script>
    <script src="./js/bootstrap-table-zh-CN.min.js"></script>
    <style>
        body {
            padding: 0 10px;
        }

        textarea {
            padding: 0;
        }
    </style>
</head>

<body>
    <style>
        #modalBoxFather {
            display: none;
            position: fixed;
            top: 0;
            width: 100%;
            height: 100%;
            margin-left: -10px;
            background-color: rgba(0, 0, 0, .5);
            z-index: 9999;
        }

        #modalBox {
            position: absolute;
            top: 100px;
            left: 50%;
            width: 80%;
            max-width: 600px;
            min-width: 300px;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
            background: #fff;
            border: 1px solid #ebeef5;
            transform: translateX(-50%);
            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);
            padding: 0 0 50px;
            box-sizing: border-box;
            z-index: 999
        }

        #modalBoxMove {
            margin: 0;
            cursor: move;
            height: 32px
        }

        #X {
            position: absolute;
            top: 5px;
            right: 10px;
            width: 20px;
            text-align: center;
            cursor: pointer;
        }

        #modalBoxBody {
            padding-top: 10px;
            width: 100%;
            min-height: 200px;
            border-top: 1px solid #ebeef5;
        }

        .confirm {
            position: absolute;
            bottom: 15px;
            right: 25%;
        }

        #cancel {
            position: absolute;
            bottom: 15px;
            right: 10%;
        }
    </style>
    <div id="modalBoxFather">
        <div id="modalBox">
            <p id="modalBoxMove"></p>
            <span id="X" onselectstart="return false;">X</span>
            <div id="modalBoxBody"></div>
            <input type="button" id="" class="confirm" value="确定">
            <input type="button" id="cancel" value="取消">
        </div>
    </div>
    <h2 style="text-align: center;">标题
        <br>
    </h2>
    <div class="_table container-fluid">
        <div class="_tbody">
            <div class="_tr row-fluid">
                <div class="_td span3">姓名</div>
                <div class="_td span3">
                    <input name="text" type="text" idtype="text" title="text" value="" placeholder="" data-msq="" id="text" unit="%"
                        style="width: 95%;">
                    <br>
                </div>
                <div class="_td span3">性别</div>
                <div class="_td span3">
                    <span title="" name="radios" idtype="radio">
                        <input value="单选1" type="radio" checked="checked" name="radio">单选1&nbsp;
                        <input value="单选2" type="radio" name="radio">单选2</span>
                    <br>
                </div>
            </div>
            <div class="_tr row-fluid">
                <div class="_td span3">头像</div>
                <div class="_td span3">
                    <input type="button" id="fileButton" idtype="file" class="btn btn-success" value="上传">
                    <br>
                </div>
                <div class="_td span3">日期
                    <br>
                </div>
                <div class="_td span3">
                    <input name="date" id="date" value="2018-05-14" type="text" idtype="date" title="date" unit="%" style="width: 95%;">
                    <br>
                </div>
            </div>
            <div class="_tr row-fluid">
                <div class="_td span3">选项
                    <br>
                </div>
                <div class="_td span3">
                    <select name="selcet" idtype="select" title="selcet" id="selcet" data-msq="" size="" unit="%" style="width: 98%;">
                        <option value="选项一" selected="selected">选项一</option>
                        <option value="选项二">选项二</option>
                        <option value="选项三">选项三</option>
                    </select>
                    <br>
                </div>
                <div class="_td span3">复选</div>
                <div class="_td span3">
                    <span title="" name="checkboxs" idtype="checkbox">
                        <input name="checkboxs" value="复选1" type="checkbox" checked="checked">复选1&nbsp;
                        <input name="checkboxs" value="复选2" type="checkbox" checked="checked">复选2&nbsp;
                        <input name="checkboxs" value="复选3" type="checkbox">复选3</span>
                    <br>
                </div>
            </div>
            <div class="_tr row-fluid">
                <div class="_td span12">
                    <div>
                        <style>
                            .treeBox775 {
                                border: 1px solid rgba(0, 0, 0, 0.1);
                                overflow: auto;
                                width: 100%;
                                height: 100%
                            }

                            .treeBox775::-webkit-scrollbar {
                                width: 4px;
                                height: 4px
                            }

                            .treeBox775::-webkit-scrollbar-thumb {
                                border-radius: 5px;
                                -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
                                background: rgba(0, 0, 0, 0.2)
                            }

                            .treeBox775::-webkit-scrollbar-track {
                                -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
                                border-radius: 0;
                                background: rgba(0, 0, 0, 0.1)
                            }

                            .ztree li span.button.add {
                                margin-left: 2px;
                                margin-right: -1px;
                                background-position: -144px 0;
                                vertical-align: top;
                                *vertical-align: middle
                            }
                        </style>
                        <div class="contentBox775" id="contentBox775">
                            <div>
                                <div class="treeBox775">
                                    <ul id="tree1775" class="ztree"></ul>
                                </div>
                            </div>
                        </div>
                        <script>
                            var getDataUrl = "http://192.168.2.31:8444/spring-boot/area/getAll";
                            var addDataUrl = "http://192.168.2.31:8444/spring-boot/area/add";
                            var deleteDataUrl = "http://192.168.2.31:8444/spring-boot/area/delete";
                            var updateDataUrl = "http://192.168.2.31:8444/spring-boot/area/update";
                            var chkStyle = "checkbox";
                            var radioType = "all";
                            var chkboxType = {
                                "Y": "ps",
                                "N": "ps"
                            };

                            function onCheck775(e, treeId, treeNode) {
                                var treeObj = $.fn.zTree.getZTreeObj("tree1775");
                                var nodes = treeObj.getCheckedNodes(true);
                                var arr = [];
                                for (var i = 0; i < nodes.length; i++) {
                                    var nodeVal = nodes[i];
                                    if (nodeVal.children == undefined) {
                                        var level = nodeVal.level;
                                        var txt = nodeVal.name;
                                        var parentVal = nodeVal.getParentNode();
                                        for (var j = 0; j < level; j++) {
                                            txt = parentVal.name + "/" + txt;
                                            parentVal = parentVal.getParentNode()
                                        }
                                        arr.push(txt)
                                    }
                                }
                                console.log(arr)
                            }

                            function onDblClick775(e, treeId, treeNode, clickFlag) {
                                clearTimeout(timeClick);
                                var treeObj = $.fn.zTree.getZTreeObj("tree1775");
                                if (treeNode != null) {
                                    treeObj.checkNode(treeNode, !treeNode.checked, true);
                                    treeObj.checkNode(treeNode, treeNode.checked, false)
                                }
                                onCheck775()
                            }
                            var timeClick;

                            function onNodeClick775(e, treeId, treeNode) {
                                clearTimeout(timeClick);
                                timeClick = setTimeout(function () {
                                    var zTree = $.fn.zTree.getZTreeObj("tree1775");
                                    zTree.expandNode(treeNode);
                                    clearTimeout(timeClick)
                                }, 230)
                            };
                            var zTree;
                            var setting775 = {
                                async: {
                                    enable: true,
                                    type: "get",
                                    url: getDataUrl,
                                    dataFilter: ajaxDataFilter
                                },
                                view: {
                                    dblClickExpand: false,
                                    showLine: true,
                                    selectedMulti: false,
                                },
                                data: {
                                    simpleData: {
                                        enable: true,
                                        idKey: "id",
                                        pIdKey: "pid",
                                        rootPId: ""
                                    }
                                },
                                check: {
                                    enable: true,
                                    chkStyle: chkStyle,
                                    radioType: radioType,
                                    chkboxType: chkboxType
                                },
                                edit: {
                                    renameTitle: "编辑节点名称",
                                },
                                callback: {
                                    onClick: onNodeClick775,
                                    beforeCheck: true,
                                    onCheck: onCheck775,
                                    beforeRename: zTreeBeforeRename,
                                    onDblClick: onDblClick775,
                                }
                            };
                            $(document).ready(function () {
                                $.fn.zTree.init($("#tree1775"), setting775)
                            });

                            function ajaxDataFilter(treeId, parentNode, responseData) {
                                if (responseData.code == "success") {
                                    var data = responseData.data
                                }
                                return data
                            }

                            function addHoverDom(treeId, treeNode) {
                                var sObj = $("#" + treeNode.tId + "_span");
                                if (treeNode.editNameFlag || $("#addBtn_" + treeNode.tId).length > 0) {
                                    return
                                }
                                var addStr = "<span class='button add' id='addBtn_" + treeNode.tId +
                                    "' title='添加子节点' onfocus='this.blur();'></span>";
                                sObj.after(addStr);
                                var addBtn = $("#addBtn_" + treeNode.tId);
                                if (addBtn) {
                                    addBtn.bind("click", function () {
                                        var zTree = $.fn.zTree.getZTreeObj("tree1775");
                                        $.ajax({
                                            url: addDataUrl,
                                            type: "post",
                                            dataType: "json",
                                            contentType: "application/json",
                                            data: JSON.stringify({
                                                pid: treeNode.id,
                                                name: "demo"
                                            }),
                                            success: function (data) {
                                                var newId = data.data.id;
                                                var newnade = {
                                                    id: newId,
                                                    name: "demo"
                                                };
                                                zTree.addNodes(treeNode, newnade);
                                                zTree.updateNode(treeNode)
                                            },
                                            error: function (data) {}
                                        });
                                        return false
                                    })
                                }
                                var delBtn = $("#" + treeNode.tId + "_remove");
                                if (delBtn) {
                                    delBtn.bind("click", function () {
                                        $.ajax({
                                            url: deleteDataUrl,
                                            type: "post",
                                            dataType: "json",
                                            contentType: "application/json",
                                            data: JSON.stringify({
                                                id: treeNode.id
                                            }),
                                            success: function (data) {},
                                            error: function (data) {}
                                        })
                                    })
                                }
                            }

                            function removeHoverDom(treeId, treeNode) {
                                $("#addBtn_" + treeNode.tId).unbind().remove()
                            }

                            function zTreeBeforeRename(treeId, treeNode, newName, isCancel) {
                                $.ajax({
                                    url: updateDataUrl,
                                    type: "put",
                                    dataType: "json",
                                    contentType: "application/json",
                                    data: JSON.stringify({
                                        id: treeNode.id,
                                        name: newName
                                    }),
                                    success: function (data) {},
                                    error: function (data) {}
                                })
                            };
                        </script>
                    </div>
                </div>
                <br>
            </div>
        </div>
        <div class="_tr row-fluid">
            <div class="_td span12">
                <div style="width:100%">
                    <table id=tabel data-toggle="table" data-show-columns="true" data-show-fullscreen="true" data-search="true"
                        data-show-refresh="true" data-show-toggle="true" data-striped="true" data-sort-name="id" data-toolbar="#toolbar"
                        data-query-params="queryParams" data-query-params-type="limit" onDblClickRow="onDblClickRow" data-pagination="true"
                        data-page-number="1" data-page-size="10" data-side-pagination="server" data-pagination="true" data-page-list="[10,20,50,100]"
                        data-pagination-first-text="首页" data-pagination-pre-text="上一页" data-pagination-next-text="下一页" data-pagination-last-text="末页"
                        data-query-params="queryParams" data-method="get" data-response-handler="responseHandler" data-row-style="rowStyle"
                        data-url="http://192.168.2.31:8444/spring-boot/book/pageList" style="text-overflow: ellipsis;white-space: nowrap;">
                        <thead>
                            <tr>
                                <th data-field="id">id</th>
                                <th data-field="reader">reader</th>
                                <th data-field="isbn">isbn</th>
                                <th data-field="title">title</th>
                                <th data-field="author">author</th>
                                <th data-field="description">description</th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <script>
                    function queryParams(params) {
                        return {
                            pageSize: params.limit,
                            pageNum: params.offset / params.limit + 1,
                        }
                    }

                    function responseHandler(result) {
                        var errcode = result.code;
                        if (errcode != "success") {
                            alert("错误代码" + errcode);
                            return
                        }
                        return {
                            "total": result.data.total,
                            "rows": result.data.list
                        }
                    }

                    function refresh() {
                        $("#table").bootstrapTable("refresh", {
                            url: "http://192.168.2.31:8444/spring-boot/book/pageList"
                        })
                    };
                </script>
                <br>
            </div>
        </div>
        <div class="_tr row-fluid">
            <div class="_td span12">
                <style>
                    #paging885 {
                        text-align: center;
                        margin: 10px 0 20px;
                    }

                    #paging885>ul,
                    #paging885>ul>li,
                    #paging885>div {
                        display: inline-block;
                        margin: 0;
                        padding: 0;
                        list-style: none;
                        vertical-align: middle
                    }

                    #paging885>ul>li {
                        float: left;
                        color: #08c;
                        padding: 4px 10px;
                        border: 1px solid #ddd;
                        cursor: pointer
                    }

                    #paging885>ul>li:hover,
                    #paging885 a:hover {
                        color: #005580;
                        background-color: #f5f5f5
                    }

                    #paging885>ul>li:first-child {
                        border-radius: 4px 0 0 4px
                    }

                    #paging885>ul>li:last-child {
                        border-radius: 0 4px 4px 0
                    }

                    #paging885 a {
                        display: inline-block;
                        font-size: 14px;
                        line-height: 20px;
                        text-decoration: none;
                        padding: 4px 10px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        vertical-align: middle
                    }

                    .pagingavtive {
                        background-color: #f5f5f5;
                        color: #999 !important;
                        cursor: default !important
                    }

                    #paging885>div {
                        vertical-align: top
                    }

                    #paging885 input {
                        margin: 0;
                        width: 20px;
                        vertical-align: top
                    }

                    #paging885>div>input {
                        border-radius: 4px 0 0 4px
                    }

                    #paging885>div>a {
                        border-radius: 0 4px 4px 0
                    }
                </style>
                <div id="paging885">
                    <a href="javascript:;" id="pagingHome">«</a>
                    <ul id="pagingFn"></ul>
                    <a href="javascript:;" id="pagingLast">»</a>
                    <div>
                        <input type="text">
                        <a href="javascript:;" id="pagingGo">GO</a>
                    </div>
                </div>
                <script>
                    pagingFnNav({
                        url: "./data/paging.json",
                        id: "pagingFn",
                        pagingHome: "pagingHome",
                        pagingLast: "pagingLast",
                        pagingGo: "pagingGo",
                        pageSize: 10,
                        showPaging: 5
                    });

                    function pagingFnNav(obj) {
                        var url = obj.url;
                        var pagingNum, ispaging, showPaging = obj.showPaging || 5;
                        var pagingFn = document.getElementById(obj.id);
                        var pagingHome = document.getElementById(obj.pagingHome);
                        var pagingLast = document.getElementById(obj.pagingLast);
                        var pagingGo = document.getElementById(obj.pagingGo);
                        pagingHome.onclick = function () {
                            fn(this.getAttribute("data-pagingnum"))
                        };
                        pagingLast.onclick = function () {
                            fn(this.getAttribute("data-pagingnum"))
                        };
                        pagingGo.onclick = function () {
                            var numV = this.previousElementSibling.value;
                            this.previousElementSibling.value = "";
                            fn(numV)
                        };
                        pagingFn.onclick = function (ev) {
                            var ev = ev || window.event;
                            var target = ev.target || ev.srcElement;
                            if (target.nodeName.toLowerCase() == "li") {
                                if (target.getAttribute("class") == "pagingavtive") {
                                    return false
                                }
                                fn(target.getAttribute("data-pagingnum"))
                            }
                        };
                        fn();

                        function fn(pageNum) {
                            pagingFnAjax(url + "?pageNum=" + (pageNum || 1) + "&pageSize=" + (obj.pageSize || 10),
                                function (data) {
                                    pagingFn.innerHTML = "";
                                    var num = 0;
                                    pagingNum = data.paging;
                                    ispaging = data.ispaging;
                                    pagingHome.setAttribute("data-pagingnum", 1);
                                    pagingLast.setAttribute("data-pagingnum", pagingNum);
                                    var intN = Math.floor(showPaging / 2) + 1;
                                    var remainPageNum = pagingNum - ispaging;
                                    var navPageNum = showPaging - intN;
                                    if (ispaging > intN && remainPageNum >= navPageNum) {
                                        num = ispaging - intN
                                    } else {
                                        if (remainPageNum < navPageNum) {
                                            num = pagingNum - showPaging;
                                            if (remainPageNum <= 0) {
                                                pagingLast.setAttribute("class", "disabled")
                                            }
                                        }
                                    }
                                    for (var i = num; i < showPaging + num; i++) {
                                        var elL = document.createElement("li");
                                        elL.setAttribute("data-pagingnum", i + 1);
                                        elL.innerHTML = i + 1;
                                        if (ispaging == i + 1) {
                                            elL.setAttribute("class", "pagingavtive")
                                        }
                                        pagingFn.appendChild(elL)
                                    }
                                })
                        }

                        function pagingFnAjax(url, callback) {
                            var xhr = new XMLHttpRequest();
                            xhr.open("get", url);
                            xhr.onreadystatechange = function () {
                                var XMLHttpReq = xhr;
                                if (XMLHttpReq.readyState == 4) {
                                    if (XMLHttpReq.status == 200) {
                                        var data = XMLHttpReq.response;
                                        data = JSON.parse(data);
                                        callback(data)
                                    } else {
                                        if (XMLHttpReq.status == 404) {
                                            alert("404")
                                        }
                                    }
                                }
                            };
                            xhr.send()
                        }
                    };
                </script>
                <br>
            </div>
        </div>
        <div class="_tr row-fluid">
            <div class="_td span12">
                <input type="button" class="btn btn-success" id="entering" idtype="button" value="AJAX">
                <input type="button" class="btn btn-success" id="add" idtype="button" value="新增">
                <input type="button" class="btn btn-info" id="move" idtype="button" value="移动">
                <input type="button" class="btn btn-danger" id="remove" idtype="button" value="删除">
                <input type="button" class="btn btn-warning" id="countermand" idtype="button" value="取消">
                <input type="button" id="fileButton" idtype="file" class="btn btn-success" value="上传">
                <input type="button" id="download" idtype="download" class="btn btn-warning" value="下载">
                <br>
            </div>
        </div>
        <div class="_tr row-fluid">
            <div class="_td span12">
                <br>
            </div>
        </div>
    </div>
    </div>
    <p>
        <br>
    </p>
    <script>
        var verify = document.getElementById("verify");
        var ifVerify;
        if (verify == null) {
            ifVerify = false
        } else {
            var verifySon = verify.children;
            for (var i = 0; i < verifySon.length; i++) {
                verifySon[i].onclick = function () {
                    if (this.value == "校验") {
                        ifVerify = true
                    } else {
                        ifVerify = false
                    }
                }
            }
            ifVerify = true
        }
        var modalBox = document.getElementById("modalBox");
        var modalBoxBody = document.getElementById("modalBoxBody");
        var X = document.getElementById("X");
        var cancel = document.getElementById("cancel");
        var confirm = document.getElementsByClassName("confirm")[0];
        modalBoxFather.onclick = function () {
            this.style.display = "none";
            modalBoxBody.innerHTML = "";
        };
        modalBox.onclick = function (e) {
            e.stopPropagation();
        };
        X.onclick = function () {
            modalBoxFather.style.display = "none";
            modalBoxBody.innerHTML = "";
            confirm.setAttribute("id", "")
        };
        cancel.onclick = function () {
            modalBoxFather.style.display = "none";
            modalBoxBody.innerHTML = "";
            confirm.setAttribute("id", "")
        };
        var mouseX;
        var mouseY;
        var elX;
        var elY;
        var moveBox = false;
        modalBoxMove.onmousedown = function (e) {
            moveBox = true;
            mouseX = e.clientX;
            mouseY = e.clientY;
            elX = e.offsetX;
            elY = e.offsetY;
            modalBox.style.transform = "none";
            modalBox.style.top = mouseY - elY + "px";
            modalBox.style.left = mouseX - elX + "px"
        };
        modalBoxMove.onmouseup = function () {
            moveBox = false
        };
        document.onmousemove = function (e) {
            if (moveBox) {
                modalBox.style.top = e.clientY - elY + "px";
                modalBox.style.left = e.clientX - elX + "px"
            }
        };
    </script>
    <script>
        var entering = document.getElementById("entering");
        entering.onclick = function () {
            confirm.setAttribute("id", "confirm");
            var myHtml = "<p style=text-align:center>URL: <input type=text placeholder=请输入AJAX地址 id=myUrl></p>";
            modalBoxBody.innerHTML = myHtml;
            confirmFn();
            modalBoxFather.style.display = "block";
        };

        function confirmFn() {
            confirm.onclick = function () {
                var myUrl = document.getElementById("myUrl").value;
                var isUrl = myUrl.replace(/s+/, "");
                if (isUrl == "") {
                    return alert("请输入URL地址......")
                }
                if (ifVerify) {
                    var myTxt = document.getElementsByTagName("input");
                    for (var i = 0; i < myTxt.length; i++) {
                        var txt = myTxt[i].value;
                        if (myTxt[i].type == "text" && myTxt[i].getAttribute("idtype") != undefined) {
                            txt.replace(/s+/g, "");
                            if (txt == "") {
                                return alert("还有内容未输入......")
                            }
                        }
                    }
                }
                var xhr = new XMLHttpRequest();
                var url = myUrl;
                xhr.open("POST", url, true);
                xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhr.onreadystatechange = function () {
                    var XMLHttpReq = xhr;
                    if (XMLHttpReq.readyState == 4) {
                        if (XMLHttpReq.status == 200) {
                            console.log("OK");
                            console.log(XMLHttpReq.response);
                            modalBoxFather.style.display = "block";
                        } else {
                            if (XMLHttpReq.status == 404) {
                                return alert("服务器异常或者URL路径错误，报错404")
                            }
                        }
                    }
                };
                xhr.send()
            };
        }
    </script>
    <script>
        var myRemove = document.getElementById("remove");
        myRemove.onclick = function () {
            confirm.setAttribute("id", "removeConfirm");
            var myHtml =
                '<p style="text-align: center"><input type="radio" name="$radio$" checked>行<input type="radio" name="$radio$">列</p><p style="text-align: center">第几<span id="cnText">行</span>(可以为多个请用，分开):</p><p style="text-align: center"><input id="text" type="text"></p>';
            modalBoxBody.innerHTML = myHtml;
            myRemoveFn();
            modalBoxFather.style.display = "block"
        };

        function myRemoveFn() {
            var inputs = document.getElementsByName("$radio$");
            var flag = true;
            for (var i = 0; i < inputs.length; i++) {
                inputs[i].index = i;
                inputs[i].onclick = function () {
                    var cnText = document.getElementById("cnText");
                    if (this.index == 0) {
                        cnText.innerText = "行";
                        flag = true
                    } else {
                        cnText.innerText = "列";
                        flag = false
                    }
                }
            }
            var removeConfirm = document.getElementById("removeConfirm");
            removeConfirm.onclick = function () {
                var tBody = document.getElementsByTagName("tbody")[0];
                var num = document.getElementById("text").value;
                if (!/^[1-9]/.test(num)) {
                    return alert("请输入0以上的数字")
                }
                num = num.replace(/，/g, ",");
                var arr = num.split(",");
                arr = arr.sort(function (a, b) {
                    return b - a
                });
                if (flag) {
                    for (var i = 0; i < arr.length; i++) {
                        var index = arr[i];
                        if (tBody.children[index - 1]) {
                            tBody.children[index - 1].remove()
                        } else {
                            return alert("没有第" + index + "行可以删除")
                        }
                    }
                } else {
                    for (var i = 0; i < tBody.children.length; i++) {
                        for (var j = 0; j < arr.length; j++) {
                            var index = arr[j];
                            if (tBody.children[i].children[index - 1]) {
                                tBody.children[i].children[index - 1].remove()
                            } else {
                                return alert("没有第" + index + "列可以删除")
                            }
                        }
                    }
                }
                modalBoxFather.style.display = "none"
            }
        };
    </script>
    <script>
        var add = document.getElementById("add");
        add.onclick = function () {
            confirm.setAttribute("id", "addConfirm");
            var myHtml =
                "<style>#modalBoxBody>div>div{float:left}#modalBoxBody > div{min-height: 100px;padding-left: 10px} #modalBoxBody select{width:75px;height:30px} #modalBoxBody h4{margin-top: 10px;} .checks{padding-top:20px;display:none}.checks>input{width:55px}b,u{display:inline-block;cursor:pointer;width:20px;text-align:center;font-size:20px}u{text-decoration:none}</style>" +
                '<div><div style="margin-right: 85px;"><h4>所属:</h4><input type="text" id="name1"></div><div><h4>类别:</h4><select name="" id="select1"><option value="input">输入框</option><option value="check">选项框</option>' +
                '</select><select name="" id="select2"><option value="input">文本框</option><option value="textarea">多行文本框</option>' +
                '</select><div class="checks"><u class="jianU">-</u><input type="text"><input type="text">' +
                '<b class="jiaB">+</b></div></div></div><div><div style="margin-right: 85px;"><h4>所属:</h4><input type="text" id="name2"></div>' +
                '<div><h4>类别:</h4><select id="select3"><option value="input">输入框</option><option value="check">选项框</option>' +
                '</select><select name="" id="select4"><option value="input">文本框</option><option value="textarea">多行文本框</option>' +
                '</select><div class="checks"><u class="jianU">-</u><input type="text"><input type="text"><b class="jiaB">+</b></div></div></div>';
            modalBoxBody.innerHTML = myHtml;
            modalBoxFather.style.display = "block";
            myAdd()
        };

        function myAdd() {
            var select1 = document.getElementById("select1");
            var select2 = document.getElementById("select2");
            var select3 = document.getElementById("select3");
            var select4 = document.getElementById("select4");
            var checks = document.getElementsByClassName("checks");
            var b = document.getElementsByClassName("jiaB");
            var u = document.getElementsByClassName("jianU");
            select1.onchange = function () {
                checks[0].style.display = "none";
                select(select1, select2, checks[0])
            };
            select3.onchange = function () {
                checks[1].style.display = "none";
                select(select3, select4, checks[1])
            };

            function select(fatherSelect, sonSelect, checks) {
                if (fatherSelect.value == "input") {
                    sonSelect.innerHTML = "<option value=input>文本框</option><option value=textarea>多行文本框</option>"
                } else {
                    if (fatherSelect.value == "check") {
                        sonSelect.innerHTML = "<option value=radio>单选</option><option value=checkbox>复选</option>";
                        checks.style.display = "block"
                    }
                }
            }
            var num1 = 2;
            var num2 = 2;
            b[0].onclick = function () {
                num1++;
                setElement(this, num1)
            };
            b[1].onclick = function () {
                num2++;
                setElement(this, num2)
            };

            function setElement(that, num) {
                var father = that.parentNode;
                var newObj = that.previousElementSibling.cloneNode(true);
                father.insertBefore(newObj, that)
            }
            u[0].onclick = function () {
                num1--;
                var that = this.parentNode;
                delElement(that)
            };
            u[1].onclick = function () {
                num2--;
                var that = this.parentNode;
                delElement(that)
            };

            function delElement(that) {
                if (that.children.length - 2 <= 1) {
                    return alert("不能删除了......")
                }
                that.children[that.children.length - 2].remove()
            }
            var addConfirm = document.getElementById("addConfirm");
            addConfirm.onclick = function () {
                var name1 = document.getElementById("name1").value;
                var name2 = document.getElementById("name2").value;
                var tr = setSelect(name1, select2.value, name2, select4.value);
                document.getElementById("name1").value = "";
                document.getElementById("name2").value = "";
                var mytTbody = document.getElementsByTagName("tbody")[0];
                mytTbody.appendChild(tr);
                modalBoxFather.style.display = "none";
                modalBoxBody.innerHTML = ""
            };

            function setSelect(name1, value1, name2, value2) {
                var tr = document.createElement("tr");
                var td = document.createElement("td");
                tr.innnerHtml = td;
                tr = setInput(checks, tr, name1, name2, value1, value2);
                return tr
            }

            function setInput(checks, tr, name1, name2, value1, value2) {
                var myTd1 = document.createElement("td");
                var myTd2 = document.createElement("td");
                myTd1.innerText = name1;
                myTd2 = xuanZe(checks[0], value1, myTd2);
                var myTd3 = document.createElement("td");
                var myTd4 = document.createElement("td");
                myTd3.innerText = name2;
                myTd4 = xuanZe(checks[1], value2, myTd4);
                tr.append(myTd1);
                tr.append(myTd2);
                tr.append(myTd3);
                tr.append(myTd4);
                return tr
            }

            function xuanZe(checks, value, myTd) {
                if (value == "input") {
                    var son = document.createElement(value);
                    son.setAttribute("type", "text");
                    myTd.appendChild(son)
                } else {
                    if (value == "textarea") {
                        var son = document.createElement(value);
                        myTd.appendChild(son)
                    } else {
                        if (value == "radio") {
                            var elemt = checks.children;
                            for (var i = 1; i < elemt.length - 1; i++) {
                                var span = document.createElement("span");
                                span.innerText = elemt[i].value;
                                var son = elemt[i].cloneNode(true);
                                son.setAttribute("type", "radio");
                                son.setAttribute("name", "radio");
                                myTd.appendChild(son);
                                myTd.appendChild(span)
                            }
                        } else {
                            if (value == "checkbox") {
                                var elemt = checks.children;
                                for (var i = 1; i < elemt.length - 1; i++) {
                                    var span = document.createElement("span");
                                    span.innerText = elemt[i].value;
                                    var son = elemt[i].cloneNode(true);
                                    son.setAttribute("type", "checkbox");
                                    son.setAttribute("name", "checkbox");
                                    myTd.appendChild(son);
                                    myTd.appendChild(span)
                                }
                            } else {
                                alert("逻辑出错")
                            }
                        }
                    }
                }
                return myTd
            }
        };
    </script>
    <script>
        var tBody = document.getElementsByTagName("tbody")[0];
        var move = document.getElementById("move");
        move.onclick = function () {
            confirm.setAttribute("id", "moveConfirm");
            var myHtml =
                '<style>#modalBoxBody > p {text-align: center;}</style><p>移动</p><p>第<input type="text" class="moveBoxTxt">行</p> <p>到</p> <p>第<input type="text" class="moveBoxTxt">行</p>';
            modalBoxBody.innerHTML = myHtml;
            moveFn();
            modalBoxFather.style.display = "block"
        };

        function moveFn() {
            var moveConfirm = document.getElementById("moveConfirm");
            moveConfirm.onclick = function () {
                var moveBoxTxts = document.getElementsByClassName("moveBoxTxt");
                for (var i = 0; i < moveBoxTxts.length; i++) {
                    moveBoxTxts[i].onblur = function () {
                        if (/\D|^0/g.test(this.value)) {
                            this.value = "";
                            this.focus();
                            return alert("请输入1-9的纯数字")
                        }
                    }
                }
                if (!moveBoxTxts[0].value || !moveBoxTxts[1].value) {
                    return alert("请输入完整")
                }
                if (!tBody.children[moveBoxTxts[0].value - 1] || !tBody.children[moveBoxTxts[1].value - 1]) {
                    return alert("请输入正确的行数")
                }
                if (moveBoxTxts[0].value < moveBoxTxts[1].value) {
                    tBody.insertBefore(tBody.children[moveBoxTxts[0].value - 1], tBody.children[moveBoxTxts[1].value])
                } else {
                    tBody.insertBefore(tBody.children[moveBoxTxts[0].value - 1], tBody.children[moveBoxTxts[1].value -
                        1])
                }
                modalBoxFather.style.display = "none";
                modalBoxBody.innerHTML = ""
            }
        };
    </script>
    <script>
        var myFile = document.querySelectorAll("[idtype='file']");
        for (var i = 0; i < myFile.length; i++) {
            myFile[i].onclick = function () {
                var thisID = "$" + this.id;
                var myHtml =
                    "<p style='text-align: center'>文件储存路径:<input id='fileTxt' value='http://192.168.2.31:8443/spring-boot/upload/file' /></p><p style='text-align: center'><input type='file' accept='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' multiple='multiple' id=" +
                    thisID + " /></p>";
                modalBoxBody.innerHTML = myHtml;
                confirm.setAttribute("id", "fileOK");
                fileOkFn(thisID);
                modalBoxFather.style.display = "block"
            }
        }

        function fileOkFn(thisID) {
            var thisID = document.getElementById(thisID);
            var fileOK = document.getElementById("fileOK");
            var fileTxt = document.getElementById("fileTxt").value;
            var formData = new FormData();
            thisID.onchange = function () {
                var file = thisID.files;
                var fileType;
                for (var i = 0; i < file.length; i++) {
                    fileType = file[i].type;
                    if (fileType == "image/png" || fileType == "image/gif" || fileType == "image/jpeg" || fileType ==
                        "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet") {
                        if (fileType == "image/png" || fileType == "image/gif" || fileType == "image/jpeg") {
                            var reader = new FileReader();
                            reader.onload = function (e) {
                                var el = document.createElement("img");
                                el.setAttribute("src", e.target.result);
                                el.setAttribute("style", "width: 33%");
                                modalBoxBody.appendChild(el)
                            };
                            reader.readAsDataURL(file[i])
                        }
                    } else {
                        return alert("上传只支持 .xlsx的Excel文件")
                    }
                    formData.append("file", file[i])
                }
            };
            fileOK.onclick = function () {
                var xhr = new XMLHttpRequest();
                xhr.open("POST", fileTxt, true);
                xhr.onreadystatechange = function () {
                    var XMLHttpReq = xhr;
                    if (XMLHttpReq.readyState == 4) {
                        if (XMLHttpReq.status == 200) {
                            alert("上传成功...");
                            modalBoxFather.style.display = "none";
                            modalBoxBody.innerHTML = ""
                        } else {
                            if (XMLHttpReq.status == 404) {
                                return alert("服务器异常或者URL路径错误，报错404,储存失败...")
                            } else {
                                return alert("储存失败...")
                            }
                        }
                    }
                };
                xhr.send(formData)
            }
        };
    </script>
    <script>
        var downloads = document.querySelectorAll('[idtype="download"]');
        for (var i = 0; i < downloads.length; i++) {
            downloads[i].onclick = function () {
                var body = document.querySelector("body").innerHTML;
                var url = " ./data/download.json ";
                var xhr = new XMLHttpRequest();
                xhr.open("POST", url, true);
                xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhr.send({
                    data: body
                });
                xhr.onreadystatechange = function () {
                    var XMLHttpReq = xhr;
                    if (XMLHttpReq.readyState == 4) {
                        if (XMLHttpReq.status == 200) {
                            var data = JSON.parse(XMLHttpReq.response);
                            window.open(data.url)
                        } else {
                            alert("下载功能------" + XMLHttpReq.status)
                        }
                    }
                }
            }
        };
    </script>
</body>
<script src="./js/jquery.datetimepicker.full.js"></script>
<script>
    $(function () {
        $("#date").datetimepicker({
            format: "Y-m-d",
            timepicker: false,
            yearStart: 2000,
            yearEnd: 2050,
            todayButton: true
        });
        $.datetimepicker.setLocale("ch")
    });
</script>

</html>